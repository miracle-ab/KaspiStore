@using OnlineStore.Models.ViewModels;
@using OnlineStore.Helpers;

@model ProductsViewModel

@{ 
    ViewBag.Title = "Products";
}

<header class="header">

    @Html.Partial("HeaderPartial")


    <div class="header__img" style="
        height: 380px;
        display: flex;
        flex-direction: row;
        align-items: center;
        justify-content: center;
        ">
        <div class="header__img__text" style="margin-top: 0px">
            <h1>Продукция</h1>
        </div>
    </div>
</header>


<section class="products" id="products">

        <div class="products__content">
            @foreach (var item in Model.Products)
            {
            <div class="product__content__block">
                @if (item.Photo != null)
                {
                    var base64 = Convert.ToBase64String(item.Photo);
                    var imgSrc = String.Format("data:image/gif;base64,{0}", base64);

                    <img src="@imgSrc" alt="..." class="product__img">
                }

                <span class="product__content__block__header">@item.Name</span>
                <p>@item.Description</p>


                <div class="product__items__block__price__order">
                    <span class="product__items__block__price">@item.Price $</span>
                    @Html.ActionLink("Заказать", "Details", "Products", new { id = @item.ProductID }, new { @class = "product__items__block__order" })
                </div>
            </div>
            }
        </div>

    <div class="product__pagination">

        @Html.PageLinks(Model.PageInfo, x => Url.Action("Index", new { page = x }))
    </div>

</section>

